<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:property name="M_PI" value="3.1415926535897931"/>
  
  <xacro:macro name="camera_turret" params="name parent *origin">
      <link name="${name}_pan_link">
          <inertial>
              <origin rpy="0 0 0" xyz="-1.35308431126191E-16 -2.97071395261028E-17 0.0220876265081744"/>
              <mass value="0.0182769203076134"/>
              <inertia ixx="1.32243845065555E-05" ixy="5.07660179129181E-13" ixz="1.067515220067E-20" iyy="7.13386116649085E-06" iyz="-1.32882457845217E-20" izz="7.83291781352837E-06"/>
          </inertial>
          <visual>
              <origin rpy="0 0 0" xyz="0 0 0"/>
              <geometry>
                  <mesh filename="package://sensors_description/meshes/tilt_link.STL"/>
              </geometry>
              <material name="">
                  <color rgba="0.250980392156863 0.250980392156863 0.250980392156863 1"/>
              </material>
          </visual>
          <collision>
              <origin rpy="0 0 0" xyz="0 0 0"/>
              <geometry>
                  <mesh filename="package://sensors_description/meshes/tilt_link.STL"/>
              </geometry>
          </collision>
      </link>
      <joint name="${name}_pan_joint" type="revolute">
          <xacro:insert_block name="origin"/>
          <parent link="${parent}"/>
          <child link="${name}_pan_link"/>
          <axis xyz="0 0 1"/>
          <dynamics damping="100.0" friction="100.0"/>
          <limit effort="1" lower="-1.57" upper="1.57" velocity="1"/>
      </joint>
      <link name="${name}_tilt_link">
          <inertial>
              <origin rpy="0 0 0" xyz="0.0168744200088311 -0.000442984145897884 -0.00405256422002387"/>
              <mass value="0.0547677687275323"/>
              <inertia ixx="1.07071738005716E-05" ixy="-1.46854788384565E-07" ixz="5.59529059364376E-08" iyy="1.77011620295824E-05" iyz="1.27587154712834E-09" izz="2.01583693170578E-05"/>
          </inertial>
          <visual>
              <origin rpy="0 0 0" xyz="0 0 0"/>
              <geometry>
                  <mesh filename="package://sensors_description/meshes/roll_link.STL"/>
              </geometry>
              <material name="">
                  <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
              </material>
          </visual>
          <collision>
              <origin rpy="0 0 0" xyz="0 0 0"/>
              <geometry>
                  <mesh filename="package://sensors_description/meshes/roll_link.STL"/>
              </geometry>
          </collision>
      </link>
      <joint name="${name}_tilt_joint" type="revolute">
          <origin rpy="0 0 0" xyz="0 0 0.05"/>
          <parent link="${name}_pan_link"/>
          <child link="${name}_tilt_link"/>
          <axis xyz="0 1 0"/>
          <dynamics damping="100.0" friction="100.0"/>
          <limit effort="1" lower="-1.57" upper="1.57" velocity="1"/>
        </joint>
        <ros2_control name="head_hardware_interface" type="system">
            <hardware>
            <plugin>gazebo_ros2_control/GazeboSystem</plugin>
            </hardware>

            <joint name="${name}_pan_joint">
            <command_interface name="position">
            </command_interface>
            <state_interface name="position"/>
            </joint>

            <joint name="${name}_tilt_joint">
            <command_interface name="position">
            </command_interface>
            <state_interface name="position"/>
            </joint>
        </ros2_control>
  </xacro:macro>
</robot>
